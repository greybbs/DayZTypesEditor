<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DayZ Types Editor</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<div class="app">
		<header class="header">
			<div class="header-top">
				<a href="index.html" class="back-link" title="На главную">←</a>
				<h1>DayZ Types Editor</h1>
			</div>
			<p class="subtitle">Настройка и валидация types.xml</p>
			<div class="toolbar">
				<label class="btn btn-secondary">
					<input type="file" id="fileInput" accept=".xml" hidden> Загрузить XML
				</label>
				<button type="button" id="exportBtn" class="btn btn-primary" disabled>Скачать types.xml</button>
				<div class="toolbar-dropdown">
					<button type="button" id="toolsBtn" class="btn btn-outline toolbar-tools-btn">Инструменты ▾</button>
					<div class="toolbar-dropdown-menu hidden" id="toolsMenu">
						<label class="toolbar-dropdown-item disabled" id="importXmlLabel" title="Сначала загрузите основной файл">
							<input type="file" id="importXmlInput" accept=".xml" hidden> Добавить из XML
						</label>
						<button type="button" id="validateBtn" class="toolbar-dropdown-item">Валидация</button>
						<button type="button" id="duplicatesBtn" class="toolbar-dropdown-item" disabled>Поиск дубликатов</button>
						<hr class="toolbar-dropdown-sep">
						<label class="toolbar-dropdown-item" id="compareVanillaLabel">
							<input type="file" id="vanillaXmlInput" accept=".xml" hidden> Сравнить с Vanilla
						</label>
					</div>
				</div>
				<button type="button" id="massAddOpenBtn" class="btn btn-outline">Массовое добавление</button>
				<button type="button" id="addSingleTypeBtn" class="btn btn-outline">Добавить предмет</button>
				<span class="toolbar-sep"></span>
				<input type="text" id="searchInput" class="toolbar-input" placeholder="Поиск по type name..." autocomplete="off">
				<select id="categoryFilter" class="toolbar-select">
					<option value="">Категория: все</option>
				</select>
				<label class="toolbar-checkbox">
					<input type="checkbox" id="delootFilter"> Deloot
				</label>
				<label class="toolbar-checkbox">
					<input type="checkbox" id="nominalPositiveFilter"> nominal > 0
				</label>
				<span class="toolbar-stats" id="stats">
					<span id="typeCount">0 предметов</span>
					<span id="selectedCount" class="hidden">0 выделено</span>
					<span id="errorCount" class="errors hidden">0 ошибок</span>
				</span>
				<a href="https://discord.gg/xhQhcSNwPf" class="btn btn-outline toolbar-discord-link" target="_blank" rel="noopener noreferrer">Discord</a>
			</div>
		</header>

		<main class="main">
			<section class="main-block">
				<button type="button" id="bulkEditBtn" style="display: none;" aria-hidden="true"></button>
				<div class="table-wrap" id="tableWrap">
					<div class="empty-state" id="emptyState">
						Загрузите файл types.xml.
					</div>
					<table class="types-table hidden" id="typesTable">
						<thead>
							<tr>
								<th class="th-checkbox"><input type="checkbox" id="selectAllCheckbox" title="Выбрать все (в фильтре)"></th>
								<th class="sortable" data-sort="name">type name</th>
								<th class="sortable" data-sort="nominal">nominal</th>
								<th class="sortable" data-sort="lifetime">lifetime</th>
								<th class="sortable" data-sort="restock">restock</th>
								<th class="sortable" data-sort="min">min</th>
								<th class="sortable" data-sort="quantmin">quantmin</th>
								<th class="sortable" data-sort="quantmax">quantmax</th>
								<th class="sortable" data-sort="cost">cost</th>
								<th class="sortable" data-sort="flags">flags</th>
								<th class="sortable" data-sort="category">category</th>
								<th class="sortable" data-sort="usage">usage</th>
								<th class="sortable" data-sort="value">value</th>
							</tr>
						</thead>
						<tbody id="tableBody"></tbody>
					</table>
				</div>
			</section>
		</main>

		<!-- Контекстное меню -->
		<div class="context-menu hidden" id="contextMenu">
			<button type="button" class="context-menu-item" id="contextRemoveSpawn">Убрать из спавна</button>
			<button type="button" class="context-menu-item" id="contextSpawnX2">Увеличить ×2</button>
			<button type="button" class="context-menu-item" id="contextSpawnX3">Увеличить ×3</button>
			<button type="button" class="context-menu-item" id="contextSpawnX4">Увеличить ×4</button>
			<button type="button" class="context-menu-item" id="contextSpawnDiv2">Уменьшить ÷2</button>
			<button type="button" class="context-menu-item" id="contextSpawnDiv3">Уменьшить ÷3</button>
			<button type="button" class="context-menu-item" id="contextSpawnDiv4">Уменьшить ÷4</button>
			<button type="button" class="context-menu-item" id="contextDelete">Удалить</button>
			<hr class="toolbar-dropdown-sep" id="contextSep" style="display: none;">
			<button type="button" class="context-menu-item" id="contextBulkEdit" style="display: none;">Массовое изменение</button>
			<button type="button" class="context-menu-item" id="contextClearSelection" style="display: none;">Снять выделение</button>
		</div>

		<button type="button" id="scrollToBottomBtn" class="scroll-to-bottom" title="Прокрутить вниз">↓</button>

		<footer class="footer">
			<span>TTL MODS 2026</span>
		</footer>
	</div>

	<!-- Modal: предупреждение о разработке -->
	<div class="modal-overlay hidden" id="warningModal">
		<div class="modal">
			<div class="modal-header">
				<h2>Внимание — приложение в разработке</h2>
				<button type="button" id="closeWarningModal" class="btn-icon" title="Закрыть">×</button>
			</div>
			<div class="modal-body">
				<p>Этот редактор типов всё ещё активно разрабатывается. Перед любыми изменениями настоятельно рекомендуем сделать <strong>резервную копию вашего файла types.xml</strong>.</p>
				<p>Если у вас есть вопросы, пожелания или вы нашли ошибку — пожалуйста, напишите нам в Discord.</p>
				<div class="modal-actions">
					<button type="button" id="warningOkBtn" class="btn btn-primary">Принять</button>
					<a href="https://discord.gg/xhQhcSNwPf" target="_blank" rel="noopener noreferrer" class="btn btn-outline">Открыть Discord</a>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal: источник для массового добавления (файл или вставка списка) -->
	<div class="modal-overlay hidden" id="massAddSourceModal">
		<div class="modal">
			<div class="modal-header">
				<h2>Массовое добавление — источник</h2>
				<button type="button" id="closeMassAddSourceModal" class="btn-icon" title="Закрыть">×</button>
			</div>
			<div class="modal-body">
				<p class="mass-add-source-hint">Загрузите .txt с Config-Type или вставьте список class name (по одному на строку).</p>
				<div class="mass-add-source-options">
					<div class="form-section">
						<label class="btn btn-outline">
							<input type="file" id="massAddSourceFile" accept=".txt" hidden> Загрузить из файла
						</label>
					</div>
					<div class="form-section">
						<label>Вставить список class name (по одному на строку)</label>
						<textarea id="massAddSourcePaste" rows="8" placeholder="Item_ClassName1&#10;Item_ClassName2&#10;..."></textarea>
					</div>
				</div>
				<div class="modal-actions">
					<button type="button" id="massAddSourceContinueBtn" class="btn btn-primary">Продолжить</button>
					<button type="button" id="massAddSourceCancelBtn" class="btn btn-outline">Отмена</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal: массовое добавление из TXT -->
	<div class="modal-overlay hidden" id="massAddModal">
		<div class="modal" id="massAddModalContent">
			<div class="modal-header">
				<h2>Массовое добавление предметов</h2>
				<button type="button" id="closeMassAddModal" class="btn-icon" title="Закрыть">×</button>
			</div>
			<div class="modal-body">
				<p class="mass-add-hint" id="massAddHint">Настройте параметры спавна для добавляемых предметов.</p>
				<div class="editor-form-columns">
					<div class="editor-form-col">
						<div class="form-section">
							<h3>Основные</h3>
							<div class="form-grid">
								<label>nominal <span class="hint">(число)</span></label>
								<input type="number" id="massAddNominal" min="0" step="1">
								<label>lifetime <span class="hint">(сек)</span></label>
								<input type="number" id="massAddLifetime" min="0" step="1">
								<label>restock</label>
								<input type="number" id="massAddRestock" min="0" step="1">
								<label>min</label>
								<input type="number" id="massAddMin" min="0" step="1">
								<label>quantmin</label>
								<input type="number" id="massAddQuantmin" min="-1" step="1">
								<label>quantmax</label>
								<input type="number" id="massAddQuantmax" min="-1" step="1">
								<label>cost</label>
								<input type="number" id="massAddCost" min="0" step="1">
							</div>
						</div>
						<div class="form-section">
							<h3>Flags</h3>
							<div class="flags-grid">
								<label><input type="checkbox" id="massAddFlagCargo" data-flag="count_in_cargo"> count_in_cargo</label>
								<label><input type="checkbox" id="massAddFlagHoarder" data-flag="count_in_hoarder"> count_in_hoarder</label>
								<label><input type="checkbox" id="massAddFlagMap" data-flag="count_in_map"> count_in_map</label>
								<label><input type="checkbox" id="massAddFlagPlayer" data-flag="count_in_player"> count_in_player</label>
								<label><input type="checkbox" id="massAddFlagCrafted" data-flag="crafted"> crafted</label>
								<label><input type="checkbox" id="massAddFlagDeloot" data-flag="deloot"> deloot</label>
							</div>
						</div>
					</div>
					<div class="editor-form-col">
						<div class="form-section">
							<h3>category</h3>
							<div class="flags-grid category-grid">
								<label><input type="radio" name="massAddCategoryOption" class="mass-add-category-option" value="tools"> tools</label>
								<label><input type="radio" name="massAddCategoryOption" class="mass-add-category-option" value="containers"> containers</label>
								<label><input type="radio" name="massAddCategoryOption" class="mass-add-category-option" value="clothes"> clothes</label>
								<label><input type="radio" name="massAddCategoryOption" class="mass-add-category-option" value="lootdispatch"> lootdispatch</label>
								<label><input type="radio" name="massAddCategoryOption" class="mass-add-category-option" value="food"> food</label>
								<label><input type="radio" name="massAddCategoryOption" class="mass-add-category-option" value="weapons"> weapons</label>
								<label><input type="radio" name="massAddCategoryOption" class="mass-add-category-option" value="books"> books</label>
								<label><input type="radio" name="massAddCategoryOption" class="mass-add-category-option" value="explosives"> explosives</label>
							</div>
							<input type="hidden" id="massAddCategory">
						</div>
						<div class="form-section">
							<h3>tag</h3>
							<div class="flags-grid tag-grid">
								<label><input type="checkbox" class="mass-add-tag-option" value="floor"> floor</label>
								<label><input type="checkbox" class="mass-add-tag-option" value="shelves"> shelves</label>
								<label><input type="checkbox" class="mass-add-tag-option" value="ground"> ground</label>
							</div>
							<textarea id="massAddTags" rows="3" style="display:none;"></textarea>
						</div>
						<div class="form-section">
							<h3>usage</h3>
							<div class="flags-grid usage-grid">
								<label><input type="checkbox" class="mass-add-usage-option" value="Military"> Military</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Police"> Police</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Medic"> Medic</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Firefighter"> Firefighter</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Industrial"> Industrial</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Farm"> Farm</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Coast"> Coast</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Town"> Town</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Village"> Village</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Hunting"> Hunting</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Office"> Office</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="School"> School</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Prison"> Prison</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Lunapark"> Lunapark</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="SeasonalEvent"> SeasonalEvent</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="ContaminatedArea"> ContaminatedArea</label>
								<label><input type="checkbox" class="mass-add-usage-option" value="Historical"> Historical</label>
							</div>
							<textarea id="massAddUsage" rows="3" style="display:none;"></textarea>
						</div>
						<div class="form-section">
							<h3>value</h3>
							<div class="flags-grid value-tiers">
								<label><input type="checkbox" class="mass-add-value-tier" value="Tier1"> Tier1</label>
								<label><input type="checkbox" class="mass-add-value-tier" value="Tier2"> Tier2</label>
								<label><input type="checkbox" class="mass-add-value-tier" value="Tier3"> Tier3</label>
								<label><input type="checkbox" class="mass-add-value-tier" value="Tier4"> Tier4</label>
								<label><input type="checkbox" class="mass-add-value-tier" value="Unique"> Unique</label>
							</div>
							<textarea id="massAddValue" rows="3" style="display:none;"></textarea>
						</div>
					</div>
				</div>
				<div class="mass-add-duplicates hidden" id="massAddDuplicatesSection">
					<h4>Дубликаты (предметы уже существуют)</h4>
					<p class="mass-add-duplicates-hint">Выберите для каждого: оставить существующий или заменить новым.</p>
					<div id="massAddDuplicatesList"></div>
				</div>
				<div class="modal-actions">
					<button type="button" id="applyMassAddBtn" class="btn btn-primary">Добавить предметы</button>
					<button type="button" id="showMassAddNamesBtn" class="btn btn-outline">Показать список</button>
					<button type="button" id="cancelMassAddBtn" class="btn btn-outline">Отмена</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal: список имён при массовом добавлении -->
	<div class="modal-overlay hidden" id="massAddNamesModal">
		<div class="modal modal-sm">
			<div class="modal-header">
				<h2>Список добавляемых предметов</h2>
				<button type="button" id="closeMassAddNamesModal" class="btn-icon" title="Закрыть">×</button>
			</div>
			<div class="modal-body">
				<div class="mass-add-names-list" id="massAddNamesListContent"></div>
			</div>
		</div>
	</div>

	<!-- Modal: добавление одного типа -->
	<div class="modal-overlay hidden" id="singleAddModal">
		<div class="modal modal-wide">
			<div class="modal-header">
				<h2>Добавить предмет</h2>
				<button type="button" id="closeSingleAddModal" class="btn-icon" title="Закрыть">×</button>
			</div>
			<div class="modal-body">
				<p class="single-add-hint">Вставьте Config-Type: ... или просто class name (один или несколько на строку). Будет добавлен тип с настройками по умолчанию.</p>
				<textarea id="singleAddText" rows="6" placeholder="Config-Type: Kuvalda_RGN_Grenade&#10;или просто:&#10;Item_ClassName"></textarea>
				<div class="single-add-preview" id="singleAddPreview"></div>
				<div class="modal-actions">
					<button type="button" id="applySingleAddBtn" class="btn btn-primary">Добавить</button>
					<button type="button" id="cancelSingleAddBtn" class="btn btn-outline">Отмена</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal: массовое изменение -->
	<div class="modal-overlay hidden" id="bulkModal">
		<div class="modal" id="bulkModalContent">
			<div class="modal-header">
				<h2>Массовое изменение</h2>
				<button type="button" id="closeBulkModal" class="btn-icon" title="Закрыть">×</button>
			</div>
			<div class="modal-body">
				<p class="bulk-hint">Отметьте поля, которые нужно изменить у выбранных типов. Остальные поля не трогаются.</p>
				<div class="editor-form-columns">
					<div class="editor-form-col">
						<div class="form-section">
							<h3>Основные</h3>
							<div class="form-grid">
								<label><input type="checkbox" id="bulkApplyNominal"> nominal <span class="hint">(число)</span></label>
								<input type="number" id="bulkNominal" min="0" step="1" placeholder="—">
								<label><input type="checkbox" id="bulkApplyLifetime"> lifetime <span class="hint">(сек)</span></label>
								<input type="number" id="bulkLifetime" min="0" step="1" placeholder="—">
								<label><input type="checkbox" id="bulkApplyRestock"> restock</label>
								<input type="number" id="bulkRestock" min="0" step="1" placeholder="—">
								<label><input type="checkbox" id="bulkApplyMin"> min</label>
								<input type="number" id="bulkMin" min="0" step="1" placeholder="—">
								<label><input type="checkbox" id="bulkApplyQuantmin"> quantmin</label>
								<input type="number" id="bulkQuantmin" min="-1" step="1" placeholder="—">
								<label><input type="checkbox" id="bulkApplyQuantmax"> quantmax</label>
								<input type="number" id="bulkQuantmax" min="-1" step="1" placeholder="—">
								<label><input type="checkbox" id="bulkApplyCost"> cost</label>
								<input type="number" id="bulkCost" min="0" step="1" placeholder="—">
							</div>
						</div>
						<div class="form-section">
							<h3><label><input type="checkbox" id="bulkApplyFlags"> Flags</label></h3>
							<div class="flags-grid">
								<label><input type="checkbox" id="bulkFlagCargo" data-flag="count_in_cargo"> count_in_cargo</label>
								<label><input type="checkbox" id="bulkFlagHoarder" data-flag="count_in_hoarder"> count_in_hoarder</label>
								<label><input type="checkbox" id="bulkFlagMap" data-flag="count_in_map"> count_in_map</label>
								<label><input type="checkbox" id="bulkFlagPlayer" data-flag="count_in_player"> count_in_player</label>
								<label><input type="checkbox" id="bulkFlagCrafted" data-flag="crafted"> crafted</label>
								<label><input type="checkbox" id="bulkFlagDeloot" data-flag="deloot"> deloot</label>
							</div>
						</div>
					</div>
					<div class="editor-form-col">
						<div class="form-section">
							<h3><label><input type="checkbox" id="bulkApplyCategory"> category</label></h3>
							<div class="bulk-form">
								<div class="flags-grid category-grid">
									<label><input type="radio" name="bulkCategoryOption" class="bulk-category-option" value="tools"> tools</label>
									<label><input type="radio" name="bulkCategoryOption" class="bulk-category-option" value="containers"> containers</label>
									<label><input type="radio" name="bulkCategoryOption" class="bulk-category-option" value="clothes"> clothes</label>
									<label><input type="radio" name="bulkCategoryOption" class="bulk-category-option" value="lootdispatch"> lootdispatch</label>
									<label><input type="radio" name="bulkCategoryOption" class="bulk-category-option" value="food"> food</label>
									<label><input type="radio" name="bulkCategoryOption" class="bulk-category-option" value="weapons"> weapons</label>
									<label><input type="radio" name="bulkCategoryOption" class="bulk-category-option" value="books"> books</label>
									<label><input type="radio" name="bulkCategoryOption" class="bulk-category-option" value="explosives"> explosives</label>
								</div>
								<input type="hidden" id="bulkCategory">
							</div>
						</div>
						<div class="form-section">
							<h3><label><input type="checkbox" id="bulkApplyTags"> tag</label></h3>
							<div class="bulk-form">
								<div class="flags-grid tag-grid">
									<label><input type="checkbox" class="bulk-tag-option" value="floor"> floor</label>
									<label><input type="checkbox" class="bulk-tag-option" value="shelves"> shelves</label>
									<label><input type="checkbox" class="bulk-tag-option" value="ground"> ground</label>
								</div>
							</div>
						</div>
						<div class="form-section">
							<h3><label><input type="checkbox" id="bulkApplyUsage"> usage</label></h3>
							<div class="bulk-form">
								<div class="flags-grid usage-grid">
									<label><input type="checkbox" class="bulk-usage-option" value="Military"> Military</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Police"> Police</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Medic"> Medic</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Firefighter"> Firefighter</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Industrial"> Industrial</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Farm"> Farm</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Coast"> Coast</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Town"> Town</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Village"> Village</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Hunting"> Hunting</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Office"> Office</label>
									<label><input type="checkbox" class="bulk-usage-option" value="School"> School</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Prison"> Prison</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Lunapark"> Lunapark</label>
									<label><input type="checkbox" class="bulk-usage-option" value="SeasonalEvent"> SeasonalEvent</label>
									<label><input type="checkbox" class="bulk-usage-option" value="ContaminatedArea"> ContaminatedArea</label>
									<label><input type="checkbox" class="bulk-usage-option" value="Historical"> Historical</label>
								</div>
								<textarea id="bulkUsage" rows="2" style="display:none;"></textarea>
							</div>
						</div>
						<div class="form-section">
							<h3><label><input type="checkbox" id="bulkApplyValue"> value</label></h3>
							<div class="bulk-form">
								<div class="flags-grid value-tiers">
									<label><input type="checkbox" class="bulk-value-tier" value="Tier1"> Tier1</label>
									<label><input type="checkbox" class="bulk-value-tier" value="Tier2"> Tier2</label>
									<label><input type="checkbox" class="bulk-value-tier" value="Tier3"> Tier3</label>
									<label><input type="checkbox" class="bulk-value-tier" value="Tier4"> Tier4</label>
									<label><input type="checkbox" class="bulk-value-tier" value="Unique"> Unique</label>
								</div>
								<textarea id="bulkValue" rows="2" style="display:none;"></textarea>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-actions">
					<button type="button" id="applyBulkBtn" class="btn btn-primary">Применить к выбранным</button>
					<button type="button" id="cancelBulkBtn" class="btn btn-outline">Отмена</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal: редактор типа -->
	<div class="modal-overlay hidden" id="editorModal">
		<div class="modal" id="editorModalContent">
			<form class="editor-form" id="editorForm">
				<div class="form-header">
					<h2>Редактирование типа</h2>
					<button type="button" id="closeEditor" class="btn-icon" title="Закрыть">×</button>
				</div>
				<div class="editor-form-columns">
					<div class="editor-form-col">
						<div class="form-section">
							<h3>type name</h3>
							<input type="text" id="fieldName" data-field="name" placeholder="Имя типа">
						</div>
						<div class="form-section">
							<h3>Основные</h3>
							<div class="form-grid">
								<label>nominal <span class="hint">(число)</span></label>
								<input type="number" id="fieldNominal" min="0" step="1" data-field="nominal">
								<label>lifetime <span class="hint">(сек)</span></label>
								<input type="number" id="fieldLifetime" min="0" step="1" data-field="lifetime">
								<label>restock</label>
								<input type="number" id="fieldRestock" min="0" step="1" data-field="restock">
								<label>min</label>
								<input type="number" id="fieldMin" min="0" step="1" data-field="min">
								<label>quantmin</label>
								<input type="number" id="fieldQuantmin" min="-1" step="1" data-field="quantmin">
								<label>quantmax</label>
								<input type="number" id="fieldQuantmax" min="-1" step="1" data-field="quantmax">
								<label>cost</label>
								<input type="number" id="fieldCost" min="0" step="1" data-field="cost">
							</div>
						</div>
						<div class="form-section">
							<h3>Flags</h3>
							<div class="flags-grid">
								<label><input type="checkbox" id="flagCargo" data-flag="count_in_cargo"> count_in_cargo</label>
								<label><input type="checkbox" id="flagHoarder" data-flag="count_in_hoarder"> count_in_hoarder</label>
								<label><input type="checkbox" id="flagMap" data-flag="count_in_map"> count_in_map</label>
								<label><input type="checkbox" id="flagPlayer" data-flag="count_in_player"> count_in_player</label>
								<label><input type="checkbox" id="flagCrafted" data-flag="crafted"> crafted</label>
								<label><input type="checkbox" id="flagDeloot" data-flag="deloot"> deloot</label>
							</div>
						</div>
					</div>
					<div class="editor-form-col">
						<div class="form-section">
							<h3>category</h3>
							<div class="flags-grid category-grid">
								<label><input type="radio" name="categoryOption" class="category-option" value="tools"> tools</label>
								<label><input type="radio" name="categoryOption" class="category-option" value="containers"> containers</label>
								<label><input type="radio" name="categoryOption" class="category-option" value="clothes"> clothes</label>
								<label><input type="radio" name="categoryOption" class="category-option" value="lootdispatch"> lootdispatch</label>
								<label><input type="radio" name="categoryOption" class="category-option" value="food"> food</label>
								<label><input type="radio" name="categoryOption" class="category-option" value="weapons"> weapons</label>
								<label><input type="radio" name="categoryOption" class="category-option" value="books"> books</label>
								<label><input type="radio" name="categoryOption" class="category-option" value="explosives"> explosives</label>
							</div>
							<input type="hidden" id="fieldCategory" data-field="category">
						</div>
						<div class="form-section">
							<h3>tag</h3>
							<div class="flags-grid tag-grid">
								<label><input type="checkbox" class="tag-option" value="floor"> floor</label>
								<label><input type="checkbox" class="tag-option" value="shelves"> shelves</label>
								<label><input type="checkbox" class="tag-option" value="ground"> ground</label>
							</div>
							<textarea id="fieldTags" rows="3" style="display:none;" data-field="tags"></textarea>
						</div>
						<div class="form-section">
							<h3>usage</h3>
							<div class="flags-grid usage-grid">
								<label><input type="checkbox" class="usage-option" value="Military"> Military</label>
								<label><input type="checkbox" class="usage-option" value="Police"> Police</label>
								<label><input type="checkbox" class="usage-option" value="Medic"> Medic</label>
								<label><input type="checkbox" class="usage-option" value="Firefighter"> Firefighter</label>
								<label><input type="checkbox" class="usage-option" value="Industrial"> Industrial</label>
								<label><input type="checkbox" class="usage-option" value="Farm"> Farm</label>
								<label><input type="checkbox" class="usage-option" value="Coast"> Coast</label>
								<label><input type="checkbox" class="usage-option" value="Town"> Town</label>
								<label><input type="checkbox" class="usage-option" value="Village"> Village</label>
								<label><input type="checkbox" class="usage-option" value="Hunting"> Hunting</label>
								<label><input type="checkbox" class="usage-option" value="Office"> Office</label>
								<label><input type="checkbox" class="usage-option" value="School"> School</label>
								<label><input type="checkbox" class="usage-option" value="Prison"> Prison</label>
								<label><input type="checkbox" class="usage-option" value="Lunapark"> Lunapark</label>
								<label><input type="checkbox" class="usage-option" value="SeasonalEvent"> SeasonalEvent</label>
								<label><input type="checkbox" class="usage-option" value="ContaminatedArea"> ContaminatedArea</label>
								<label><input type="checkbox" class="usage-option" value="Historical"> Historical</label>
							</div>
							<textarea id="fieldUsage" rows="3" style="display:none;" data-field="usage"></textarea>
						</div>
						<div class="form-section">
							<h3>value <span class="hint">	</span></h3>
							<div class="flags-grid value-tiers">
								<label><input type="checkbox" class="value-tier" value="Tier1"> Tier1</label>
								<label><input type="checkbox" class="value-tier" value="Tier2"> Tier2</label>
								<label><input type="checkbox" class="value-tier" value="Tier3"> Tier3</label>
								<label><input type="checkbox" class="value-tier" value="Tier4"> Tier4</label>
								<label><input type="checkbox" class="value-tier" value="Unique"> Unique</label>
							</div>
							<textarea id="fieldValue" rows="3" style="display:none;" data-field="value"></textarea>
						</div>
						<div class="form-errors empty" id="formErrors"></div>
						<div class="form-actions">
							<button type="submit" class="btn btn-primary">Сохранить</button>
							<button type="button" id="revertBtn" class="btn btn-outline">Отменить</button>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>

	<!-- Modal: ошибки валидации -->
	<div class="modal-overlay hidden" id="errorsModal">
		<div class="modal modal-wide">
			<div class="modal-header">
				<h2>Ошибки валидации</h2>
				<button type="button" id="closeErrorsModal" class="btn-icon" title="Закрыть">×</button>
			</div>
			<div class="modal-body">
				<p class="errors-hint" id="errorsHint"></p>
				<div class="errors-list" id="errorsList"></div>
				<div class="modal-actions">
					<button type="button" id="fixAllErrorsBtn" class="btn btn-primary" style="display: none;">Исправить все</button>
					<button type="button" id="closeErrorsBtn" class="btn btn-outline">Закрыть</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal: дубликаты -->
	<div class="modal-overlay hidden" id="duplicatesModal">
		<div class="modal modal-wide">
			<div class="modal-header">
				<h2>Дубликаты по type name</h2>
				<button type="button" id="closeDuplicatesModal" class="btn-icon" title="Закрыть">×</button>
			</div>
			<div class="modal-body">
				<p class="duplicates-hint" id="duplicatesHint">Выберите для каждой группы запись «Оставить», остальные можно удалить.</p>
				<div id="duplicatesList"></div>
				<div class="modal-actions">
					<button type="button" id="applyDuplicatesBtn" class="btn btn-primary">Удалить выбранные дубликаты</button>
					<button type="button" id="closeDuplicatesBtn" class="btn btn-outline">Закрыть</button>
				</div>
			</div>
		</div>
	</div>

	<script src="app.js"></script>
</body>
</html>
